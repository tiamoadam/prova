<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Per il mio amore ‚ù§Ô∏è</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #0a0f3d;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-family: 'Arial', sans-serif;
      overflow: hidden;
      color: #ff4d6d;
      position: relative;
    }

    .title, #message, button {
      color: #ff4d6d;
      text-shadow:
        0 0 5px #ff4d6d,
        0 0 10px #ff4d6d,
        0 0 20px #ff4d6d,
        0 0 40px #ff4d6d;
      transition: all 0.5s ease;
    }

    .title {
      font-size: 2.5rem;
      text-align: center;
      z-index: 1;
      animation: fadeIn 2s ease-in-out;
    }

    #message {
      font-size: 1rem; /* rimpicciolita */
      margin-top: 20px;
      max-width: 600px;
      text-align: center;
      z-index: 1;
      min-height: 60px;
      white-space: pre-line;
      animation-fill-mode: forwards;
    }

    @keyframes textAppear {
      0% { opacity: 0; transform: translateY(10px); filter: blur(4px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }

    .heart {
      position: absolute;
      font-size: 24px;
      animation: fall linear forwards;
      user-select: none;
      pointer-events: none;
      filter: drop-shadow(0 0 5px currentColor);
      opacity: 0.8;
      z-index: 0;
      color: #ff4d6d;
      transition: color 0.5s ease;
    }

    .white-hearts {
      color: #ffffff !important;
      filter: drop-shadow(0 0 8px #fff) !important;
    }
    
    @keyframes fall {
      from { transform: translateY(-10vh); opacity: 1; }
      to { transform: translateY(110vh); opacity: 0; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    button {
      margin-top: 30px;
      padding: 12px 24px;
      border: none;
      border-radius: 30px;
      background: #ff4d6d;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      z-index: 1;
      transition: transform 0.2s;
    }

    button:hover {
      transform: scale(1.08);
      background: #ff7998;
    }

    #finalMessage {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4rem;
      line-height: 1.2;
      color: #ff3b6b;
      text-align: center;
      text-shadow:
        0 0 10px #ff3b6b,
        0 0 20px #ff3b6b,
        0 0 40px #ff3b6b;
      z-index: 10;
      animation: pulse 1.5s infinite alternate;
    }

    @keyframes pulse {
      from { transform: translate(-50%, -50%) scale(1); }
      to { transform: translate(-50%, -50%) scale(1.06); }
    }

    #smallLoveNote {
      position: fixed;
      bottom: 10px;
      right: 15px;
      font-size: 1rem;
      color: #ff4d6d;
      font-style: italic;
      font-weight: 600;
      z-index: 10;
    }
  </style>
</head>
<body>

<h1 class="title">Per il ragazzo migliore al mondo ü§ç</h1>
<div id="message"></div>
<button id="actionButton">Cliccami ‚ù§Ô∏è</button>

<script>
const messages = [
  "a te che sei il mio sorriso preferito",
  "a te che mi fai sentire amata",
  "a te che sei il mio tutto"
];

const dedica = `Buon san valentino a noi amoree <33
Quest'anno √® anche il nostro primo che lo facciamo e spero ne festeggeremo altri 100 assieme. 
Anche se non sono li con te di persona, ti volevo dare un regalino, perci√≤ mi era venuto in mente di fare questo, anche per dimostrarti che tutto quello che fai mi interessa e che non √® inutile mostrarmi le cose, anche se magari non ci capisco;
Ma non √® questo il punto importante.
Amoremio ti volevo dire che sei una delle cose pi√π belle che mi siano apparse nella vita.
Ogni giorno passarlo con te √® speciale, anche quando ho paura o sbaglio, voglio continuare a ridere assieme a te e ad affrontare tutto insieme.
E te lo giuro che un giorno passeremo abbracciati tutti questi giorni che stiamo passando distanti.
E come te lo ricordo ogni giorno, sei ineffabile vitamia. Ogni giorno che passa ho un motivo per amarti sempre di pi√π per quanto tu sia magnifico in quello che fai e in quello che sei.
Comunque √® vero, ho ancora molto da imparare sull'amore ma voglio impararlo con te, ho ancora molti difetti da correggere ma voglio correggerli per noi due, ci sono ancora molte cose da vivere e voglio viverle insieme a te. Voglio che cresciamo assieme, che impariamo cose diverse assieme, creare una famiglia assieme a te, e ovviamente sperimentare tuuuuutto quello che riusciamo a fare ma comunque lo voglio fare solo con te, io e te insieme e basta.
E quindi niente amore, volevo ringraziarti per ogni piccolo gesto che mi fai sentire amata e per non esserti arreso con me e per la pazienza che hai con me. E sappi che tornerei indietro nel tempo anche rivivendo le cose brutte pur di non perderti e stare assieme con te.
Buon primo san valentino a noi amoremio,
Ti amo tanto tanto tanto tanto tanto tanto tantoü§ç`;

let msgIndex = 0;
let clickCount = 0;

const button = document.getElementById('actionButton');
const messageEl = document.getElementById('message');
const titleEl = document.querySelector('.title');

function updateHeartsColor(toWhite) {
  document.querySelectorAll('.heart').forEach(h => {
    toWhite ? h.classList.add('white-hearts') : h.classList.remove('white-hearts');
  });
}

function typeWriter(text, i = 0) {
  if (i < text.length) {
    messageEl.textContent += text.charAt(i);
    setTimeout(() => typeWriter(text, i + 1), 25);
  }
}

function nextMessage() {
  if (clickCount < 3) {
    messageEl.textContent = "";
    typeWriter(messages[msgIndex]);
    msgIndex = (msgIndex + 1) % messages.length;
    clickCount++;
    if (clickCount === 3) {
      button.textContent = "Leggi la dedica ‚ù§Ô∏è";
    }
  } else {
    messageEl.textContent = "";
    messageEl.style.animation = 'textAppear 3s ease forwards';
    typeWriter(dedica);
    button.style.display = "none";
    titleEl.style.display = "none";

    updateHeartsColor(true);

    const delay = dedica.length * 25 + 500;
    setTimeout(() => {
      const surpriseBtn = document.createElement("button");
      surpriseBtn.textContent = "Sorpresa finale";
      document.body.appendChild(surpriseBtn);

      surpriseBtn.addEventListener("click", () => {
        let countdown = 3;
        surpriseBtn.textContent = `Questa lettera sparir√† tra ${countdown} secondi`;
        surpriseBtn.disabled = true;

        const intervalId = setInterval(() => {
          countdown--;
          if (countdown > 0) {
            surpriseBtn.textContent = `Questa lettera sparir√† tra ${countdown} secondi`;
          } else {
            clearInterval(intervalId);
            messageEl.style.display = "none";
            surpriseBtn.style.display = "none";
            updateHeartsColor(false);

            const finalMsg = document.createElement("div");
            finalMsg.id = "finalMessage";
            finalMsg.innerHTML = `Ma quello<br>che provo<br>non scade<br><div style="font-size:5rem;">ü§ç</div>`;
            document.body.appendChild(finalMsg);

            const loveNote = document.createElement("div");
            loveNote.id = "smallLoveNote";
            loveNote.textContent = "ti amo scemo, dalla tua jenny<3";
            document.body.appendChild(loveNote);
          }
        }, 1000);
      });
    }, delay);
  }
}

button.addEventListener("click", nextMessage);

function createHeart() {
  const heart = document.createElement("div");
  heart.classList.add("heart");
  heart.textContent = "‚ù§Ô∏è";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (Math.random() * 20 + 10) + "px";
  heart.style.animationDuration = (Math.random() * 3 + 3) + "s";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}

setInterval(createHeart, 300);
</script>

</body>
</html>
